From c1ce24ddcd1c9a69ac0c8ade00ff1b0a7390d07e Mon Sep 17 00:00:00 2001
From: lch <lchopn@gmail.com>
Date: Wed, 18 Sep 2024 21:48:09 +0800
Subject: [PATCH 1/3] Fix Makefile for packaging

---
 Makefile | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/Makefile b/Makefile
index 03401574..ea044cd8 100644
--- a/Makefile
+++ b/Makefile
@@ -19,7 +19,7 @@ CROSS_TAGLIB_VERSION ?= 2.1.1-1
 
 UI_SRC_FILES := $(shell find ui -type f -not -path "ui/build/*" -not -path "ui/node_modules/*")
 
-setup: check_env download-deps install-golangci-lint setup-git ##@1_Run_First Install dependencies and prepare development environment
+setup: ##@1_Run_First Install dependencies and prepare development environment
 	@echo Downloading Node dependencies...
 	@(cd ./ui && npm ci)
 .PHONY: setup
@@ -102,7 +102,7 @@ setup-git: ##@Development Setup Git hooks (pre-commit and pre-push)
 	@(cd .git/hooks && ln -sf ../../git/* .)
 .PHONY: setup-git
 
-build: check_go_env buildjs ##@Build Build the project
+build: buildjs ##@Build Build the project
 	go build -ldflags="-X github.com/navidrome/navidrome/consts.gitSha=$(GIT_SHA) -X github.com/navidrome/navidrome/consts.gitTag=$(GIT_TAG)" -tags=netgo
 .PHONY: build
 
@@ -113,7 +113,7 @@ debug-build: check_go_env buildjs ##@Build Build the project (with remote debug
 	go build -gcflags="all=-N -l" -ldflags="-X github.com/navidrome/navidrome/consts.gitSha=$(GIT_SHA) -X github.com/navidrome/navidrome/consts.gitTag=$(GIT_TAG)" -tags=netgo
 .PHONY: debug-build
 
-buildjs: check_node_env ui/build/index.html ##@Build Build only frontend
+buildjs: ui/build/index.html ##@Build Build only frontend
 .PHONY: buildjs
 
 docker-buildjs: ##@Build Build only frontend using Docker
-- 
2.50.1

